"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[870],{4870:(t,e,n)=>{n.r(e),n.d(e,{default:()=>s});const o={name:"ArticleCommentReply",props:["authid","articleId"],data:function(){return{formData:{comment:"",article_id:this.articleId},comments:[],obj:{article_id:this.articleId,user_id:this.authid,comment_id:"",reply:""}}},methods:{addComment:function(){var t=this;axios.post("/comment/store",this.formData).then((function(e){e.data.data&&(t.comments.unshift(e.data.data),t.formData.comment="",toastr.success("Comment added successfully!"))})).catch((function(t){console.log(t)}))},getAllComment:function(){var t=this;axios.get("/comments/".concat(this.formData.article_id)).then((function(e){var n;t.comments=null!==(n=e.data.data)&&void 0!==n?n:[]})).catch((function(t){console.log(t)}))},openReplyForm:function(t,e){document.getElementById("reply-form-".concat(e)).classList.remove("d-none")},commentReply:function(t,e,n){var o=this;e.comment_id=t,axios.post("/reply/store",e).then((function(t){var e=t.data.data;o.authid,(new Date).toLocaleString();o.comments[n].replies.push(e),document.getElementById("reply-form-".concat(n)).classList.add("d-none"),toastr.success("Reply added successfully!"),o.obj.reply="",o.getAllComment()})).catch((function(t){console.log(t)}))},deleteComment:function(t,e){var n=this,o=this;o.$swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then((function(s){s.isConfirmed?axios.delete("/comment/delete/".concat(t)).then((function(t){t.data.success?(n.comments.splice(e,1),toastr.success(t.data.success)):toastr.error(t.data.error)})).catch((function(t){console.log(t)})):o.$swal("Delete request cancel!")}))},deleteReply:function(t,e,n){var o=this,s=this;s.$swal({title:"Are you sure?",text:"Once deleted, you will not be able to recover!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then((function(a){a.isConfirmed?axios.delete("/reply/delete/".concat(e)).then((function(e){e.data.success?(o.comments[t].replies.splice(n,1),toastr.success(e.data.success)):toastr.error(e.data.error)})).catch((function(t){console.log(t)})):s.$swal("Delete request cancel!")}))},editComment:function(t,e){},editReply:function(t,e){document.getElementById("reply-edit-".concat(e)).classList.remove("d-none")},updateComment:function(t,e){var n=this.comments[e].comment;axios.put("/comment/update/".concat(t),{comment:n}).then((function(t){t.data.success?(document.getElementById("edit-comment-".concat(e)).classList.add("d-none"),toastr.success(t.data.success)):toastr.error(t.data.error)})).catch((function(t){console.log(t)}))},updateReply:function(t,e,n){var o=this.comments[e].replies[n].reply;axios.put("/reply/update/".concat(t),{reply:o}).then((function(t){t.data.success?(document.getElementById("reply-edit-".concat(n)).classList.add("d-none"),toastr.success(t.data.success)):toastr.error(t.data.error)})).catch((function(t){console.log(t)}))}},mounted:function(){this.getAllComment()}};const s=(0,n(8758).Z)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ic-leave-comment-main ic-contact-right"},[t.authid?n("h2",[t._v("Leave a Comment")]):t._e(),t._v(" "),n("form",{attrs:{action:"#"}},[t.authid?n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12"},[n("div",{staticClass:"form-group"},[n("label",{staticClass:"pb-2"},[t._v("Comment")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.comment,expression:"formData.comment"}],staticClass:"form-control",attrs:{placeholder:"Type a comment"},domProps:{value:t.formData.comment},on:{input:function(e){e.target.composing||t.$set(t.formData,"comment",e.target.value)}}})])])]):t._e(),t._v(" "),t.authid?n("div",{staticClass:"ic-leave-comment-button"},[n("button",{staticClass:"ic-btn",attrs:{type:"button"},on:{click:t.addComment}},[t._v("Submit")])]):t._e(),t._v(" "),n("div",{staticClass:"ic-blog-comments-main"},[n("h2",[t._v("Comments ("+t._s(t.comments.length)+")")]),t._v(" "),n("div",{staticClass:"ic-blog-comments-show"},[n("div",{staticClass:"ic-blog-comments-show-group mb-5"},t._l(t.comments,(function(e,o){return n("div",{key:o,staticClass:"mb-3"},[n("div",{staticClass:"ic-blog-comments-show-items"},[n("img",{attrs:{src:e.user.avatar_url,alt:"blog-comments-img"}}),t._v(" "),n("div",{staticClass:"ic-comments-contents"},[n("ul",{staticClass:"ic-blog-comments-name"},[n("li",[n("h4",[t._v(t._s(e.user.full_name))])]),t._v(" "),n("li",[n("p",{staticClass:"blog-date"},[t._v("\n                      "+t._s(t._f("customDate")(e.created_at))+"\n                    ")])])]),t._v(" "),n("p",[t._v("\n                  "+t._s(e.comment)+"\n                ")]),t._v(" "),n("div",{staticClass:"ic__action-btn"},[t.authid?n("button",{attrs:{type:"button"},on:{click:function(n){return t.openReplyForm(e.id,o)}}},[n("i",{staticClass:"ri-reply-fill"})]):t._e(),t._v(" "),t.authid==e.user.id?[n("button",{attrs:{type:"button"},on:{click:function(n){return t.deleteComment(e.id,o)}}},[n("i",{staticClass:"ri-delete-bin-fill"})]),t._v(" "),n("button",{attrs:{type:"button"},on:{click:function(n){return t.editComment(e.id,o)}}},[n("i",{staticClass:"ri-edit-2-fill"})])]:t._e()],2),t._v(" "),t.authid?n("div",{staticClass:"d-none",attrs:{id:"reply-form-"+o}},[n("div",{staticClass:"form-group mt-3"},[n("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:t.obj.reply,expression:"obj.reply",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{placeholder:"Type a comment"},domProps:{value:t.obj.reply},on:{change:function(e){return t.$set(t.obj,"reply",e.target.value)}}})]),t._v(" "),n("button",{staticClass:"ic-btn btn-hotpink",attrs:{type:"button"},on:{click:function(n){return t.commentReply(e.id,t.obj,o)}}},[t._v("\n                    Submit\n                  ")])]):t._e(),t._v(" "),t.authid?n("div",{staticClass:"d-none",attrs:{id:"edit-comment-"+o}},[n("div",{staticClass:"form-group mt-3"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment.comment"}],staticClass:"form-control",attrs:{placeholder:"Type a comment"},domProps:{value:e.comment},on:{input:function(n){n.target.composing||t.$set(e,"comment",n.target.value)}}})]),t._v(" "),n("button",{staticClass:"ic-btn btn-hotpink",attrs:{type:"button"},on:{click:function(n){return t.updateComment(e.id,o)}}},[t._v("\n                    Update\n                  ")])]):t._e()])]),t._v(" "),e.replies.length>0?t._l(e.replies,(function(e,s){return n("div",{key:s,staticClass:"ic-blog-comments-show-items"},[n("img",{attrs:{src:e.user.avatar_url,alt:"blog-comments-img"}}),t._v(" "),n("div",{staticClass:"ic-comments-contents"},[n("ul",{staticClass:"ic-blog-comments-name"},[n("li",[n("h4",[t._v(t._s(e.user.full_name))])]),t._v(" "),n("li",[e.created_at?n("p",{staticClass:"blog-date"},[t._v("\n                        "+t._s(t._f("customDate")(e.created_at))+"\n                      ")]):t._e()])]),t._v(" "),n("p",[t._v("\n                    "+t._s(e.reply)+"\n                  ")]),t._v(" "),n("div",{staticClass:"ic__action-btn"},[t.authid==e.user.id?[n("button",{attrs:{type:"button"},on:{click:function(n){return t.deleteReply(o,e.id,s)}}},[n("i",{staticClass:"ri-delete-bin-fill"})]),t._v(" "),n("button",{attrs:{type:"button"},on:{click:function(n){return t.editReply(e.id,s)}}},[n("i",{staticClass:"ri-edit-2-fill"})])]:t._e()],2),t._v(" "),t.authid?n("div",{staticClass:"d-none",attrs:{id:"reply-edit-"+s}},[n("div",{staticClass:"form-group mt-3"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.reply,expression:"reply.reply"}],staticClass:"form-control",attrs:{placeholder:"Type a reply"},domProps:{value:e.reply},on:{input:function(n){n.target.composing||t.$set(e,"reply",n.target.value)}}})]),t._v(" "),n("button",{staticClass:"ic-btn btn-hotpink",attrs:{type:"button"},on:{click:function(n){return t.updateReply(e.id,o,s)}}},[t._v("\n                      Update\n                    ")])]):t._e()])])})):t._e()],2)})),0)])])])])}),[],!1,null,null,null).exports},8758:(t,e,n)=>{function o(t,e,n,o,s,a,c,i){var l,r="function"==typeof t?t.options:t;if(e&&(r.render=e,r.staticRenderFns=n,r._compiled=!0),o&&(r.functional=!0),a&&(r._scopeId="data-v-"+a),c?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(c)},r._ssrRegister=l):s&&(l=i?function(){s.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(r.functional){r._injectStyles=l;var m=r.render;r.render=function(t,e){return l.call(e),m(t,e)}}else{var d=r.beforeCreate;r.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:r}}n.d(e,{Z:()=>o})}}]);